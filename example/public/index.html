<!DOCTYPE html>

<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="/node_modules/angular/angular.js"></script>
    <script src="/node_modules/angular-socket-io/socket.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <link rel="stylesheet" href="/css/bootstrap.min.css">
    <script src="app.js"></script>
  </head>
  <body ng-app="CGMApp">
    <div class="container">
      <div class="row" ng-controller="MyCtrl">
        <div class="col-md-6">
          <h2>Transmitter Details</h2>
          <p>Transmitter ID: {{ id }}</p>
          <p>Status: {{ status | status }}</p>
          <p>State: {{ state | state }}</p>
          <p>Transmitter age: {{ transmitterAge | time }}</p>
          <p>Sensor age: {{ sensorAge | time }}</p>
          <p>Glucose time: {{ time | date:'medium' }}</p>
          <p>Glucose: {{ glucose | mg_per_dl }}</p>
          <p>Unfiltered glucose: {{ unfiltered | mg_per_dl }}</p>
          <p>In session: {{ inSession }}</p>
          <p>calibration: {{ calibration.value }}</p>
        </div>
        <div class="col-md-6">
          <h2>Transmitter Controls</h2>
          <div class="col-md-12">
            <button class="btn btn-warning" ng-if="!inSession" ng-click="startSensor()">Start sensor</button>
            <button class="btn btn-danger" ng-if="inSession" ng-click="stopSensor()">Stop sensor</button>
          </div>
          <form name="form" class="col-md-12" ng-if="canBeCalibrated" ng-submit="form.$valid && (calibration.value) && calibrate(calibration.value)">
            <div class="form-group">
              <label for="blood-glucose">BGL (mg/dL)</label>
              <input type="number" min="40" max="400" class="form-control" name="blood-glucose" ng-model="calibration.value" placeholder="BGL"/>
            </div>
            <button class="btn btn-primary" type="submit">Calibrate</button>
          </form>
        </div>
      </div>
    </div>
  </body>
</html>
